{% extends "base.html" %}
{% block content %}
<section class="cart">
  <h2>Your Order</h2>

  {% if not items %}
    <p>Your cart is empty.</p>
    <p><a href="{{ url_for('menu') }}">Browse the menu</a></p>
  {% else %}
    <form method="post">
      <table>
        <thead>
          <tr><th>Item</th><th>Price</th><th>Quantity</th><th>Total</th></tr>
        </thead>
        <tbody>
          {% for item in items %}
            <tr>
              <td>{{ item.name }}</td>
              <td>£{{ "%.2f"|format(item.price) }}</td>
              <td>
                <input type="number" name="qty_{{ item.id }}" value="{{ item.quantity }}" min="0">
              </td>
              <td>£{{ "%.2f"|format(item.line_total) }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <p class="cart-total">Total: £{{ "%.2f"|format(total) }}</p>
      <button type="submit">Update Cart</button>
      <button type="submit" name="clear" value="1">Clear Cart</button>
    </form>
    <p><a class="btn" href="{{ url_for('checkout') }}">Proceed to Checkout</a></p>
  {% endif %}
</section>
{% endblock %}